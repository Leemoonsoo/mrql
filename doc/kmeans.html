<html>
<head>
<TITLE>K-means Clustering on MRQL</TITLE>
</head>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<center>
<H2>K-means Clustering on MRQL</H2>
</center>
<p>
The following instructions assume that you have already installed Hadoop in your cluster
and you have tested it using some examples.
The following tests use the k-means clustering query <a href="kmeans.mrql">queries/kmeans.mrql</a>.
<p>
<h3>Run K-means Clustering on a Hadoop MapReduce Cluster</h3>

First, you need to generate random ponts and store them in a HDFS file using the MRQL program
<a href="points.mrql">queries/points.mrql</a>:
<pre>
mrql -dist -C queries/points.mrql 1000000
</pre>
This will create 1M points and will store them in HDFS as the sequence file <tt>points.bin</tt>.
You can adjust this number to fit your cluster.
Then, run the k-means clustering in map-reduce mode using:
<pre>
mrql -dist -C queries/kmeans.mrql
</pre>

<p>
<h3>Run K-means Clustering on a Hama Cluster</h3>

To run the same query using Hama, you need to know the number of simultaneous BSP tasks that can run
in parallel on your Hama cluster without a problem. For example, if you have 16 nodes with 4 cores each,
you need to set <tt>-bsp_tasks</tt> less than 64, eg 50.
First, you need to generate random points and store them in a HDFS file
(if you haven't done so for the MapReduce example):
<pre>
mrql.bsp -dist -C -bsp_tasks 50 queries/points.mrql 1000000
</pre>
This will create 1M points and will store them in HDFS as the sequence file <tt>points.bin</tt>.
You can adjust this number to fit your cluster.
Then, run the k-means clustering in BSP mode using:
<pre>
mrql.bsp -dist -C -bsp_tasks 50 queries/kmeans.mrql
</pre>
<p>
<hr>
<p>
<address>Last modified: 10/25/12 by <a href="http://lambda.uta.edu/">Leonidas Fegaras</a></address></body></html>
